# Clerk Authentication Setup

This project has been updated to use Clerk for admin authentication instead of environment-based authentication.

## Setup Instructions

### 1. Create a Clerk Account
1. Go to [clerk.com](https://clerk.com) and create an account
2. Create a new application
3. Choose "Next.js" as your framework

### 2. Configure Environment Variables
Create a `.env.local` file in the `frontend` directory with the following variables:

```env
# Clerk Authentication
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_your-publishable-key-here
CLERK_SECRET_KEY=sk_test_your-secret-key-here

# API Configuration
NEXT_PUBLIC_API_URL=http://localhost:3001/api/v1
```

### 3. Update Clerk Configuration
1. Replace the placeholder values in `frontend/clerk.json` with your actual Clerk keys
2. Update the `publishableKey` field with your actual publishable key

### 4. Configure Admin Users
1. In your Clerk dashboard, go to "Users"
2. Create admin users with the email addresses you want to have admin access
3. You can also configure email domains to automatically grant admin access

### 5. Customize Authentication (Optional)
- Update the appearance in `frontend/clerk.json` to match your brand
- Modify the middleware in `frontend/src/middleware.ts` to adjust protected routes
- Update the admin layout in `frontend/src/components/admin/AdminLayout.tsx` for custom styling

## Features

- **Secure Authentication**: Uses Clerk's secure authentication system
- **User Management**: Admin users can be managed through Clerk dashboard
- **Session Management**: Automatic session handling and renewal
- **Responsive Design**: Works on desktop and mobile devices
- **Event Logging**: All login/logout events are still logged in the backend

## Migration Notes

- The old environment-based authentication (`ADMIN_EMAIL`, `ADMIN_PASSWORD`) has been removed
- JWT tokens are no longer generated by the backend
- All authentication is now handled by Clerk
- The backend login route has been updated to work with Clerk session tokens

## Troubleshooting

1. **Authentication not working**: Check that your Clerk keys are correctly set in the environment variables
2. **Users can't access admin**: Ensure users are created in your Clerk dashboard
3. **Styling issues**: Update the appearance configuration in `clerk.json`

## Security Notes

- Never commit your actual Clerk keys to version control
- Use environment variables for all sensitive configuration
- Regularly rotate your Clerk keys
- Monitor authentication events in your Clerk dashboard 